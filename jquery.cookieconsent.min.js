(function(a,b,c,d){function f(b,c){this.element=b;this.options=a.extend({},a.fn[e].defaults,c);this._defaults=a.fn[e].defaults;this._name=e;this.init()}var e="cookieConsent";f.prototype={init:function(){var b=a(this.element);var c=this.options;this.consentCookieName=c.consentCookieName;this.notificationCookieName=c.notificationCookieName;var d=this._getConsentCookie(),e=this._getNotificationShownCookie();this.consentGiven=true;if(!d){this._setConsentCookie(c.compliantMode?0:1)}else{this.consentGiven=d=="1"?true:false}if(this.consentGiven){c.onCookiesAllowed();this.cookieDisplay='<div class="cookie-status allowed"><div class="wrapper">'+'<span class="title">Current cookie settings:</span> <span class="status">Cookies are allowed</span>'+"<p>All of the features of this web site will be available to you.</p>"+"</div></div>"}else{this.cookieDisplay='<div class="cookie-status blocked"><div class="wrapper">'+'<span class="title">Current cookie settings:</span> <span class="status">Cookies are blocked!</span>'+"<p>Some of the features of this site will not be available to you, or may not operate correctly, such as social sharing links.</p>"+"</div></div>"}if(c.showSettings){this._buildSettingsPanel(b,c)}if(!e){this._buildNotificationPanel(b,c);this._setNotificationTimer()}},hideSettingsPanel:function(){a("#cookie-settings-overlay, #cookie-settings").hide()},showSettingsPanel:function(){a("#cookie-settings-overlay, #cookie-settings").show()},hideNotificationPanel:function(){a("#cookie-notification").hide();this._setNotificationShownCookie(1)},revokeConsent:function(a){this._setConsentCookie(0);a.onCookiesNotAllowed();this._reloadPage()},setConsent:function(){this._setConsentCookie(1);this._reloadPage()},showCurrentCookieSettings:function(b){a(b).append(this.cookieDisplay)},_getConsentCookie:function(){return this._getCookie(this.consentCookieName)},_setConsentCookie:function(a){this._setCookie(this.consentCookieName,a,365,"/")},_getNotificationShownCookie:function(){return this._getCookie(this.notificationCookieName)},_setNotificationShownCookie:function(a){this._setCookie(this.notificationCookieName,a,365,"/")},_setCookie:function(a,b,d,e,f,g){var h=new Date;h.setTime(h.getTime());if(d){d=d*1e3*60*60*24}var i=new Date(h.getTime()+d);c.cookie=a+"="+escape(b)+(d?";expires="+i.toGMTString():"")+(e?";path="+e:"")+(f?";domain="+f:"")+(g?";secure":"")},_getCookie:function(b){var d=null;if(c.cookie&&c.cookie!=""){var e=c.cookie.split(";");for(var f=0;f<e.length;f++){var g=a.trim(e[f]);if(g.substring(0,b.length+1)==b+"="){d=decodeURIComponent(g.substring(b.length+1));break}}}return d},_reloadPage:function(){b.setTimeout(function(){c.location.reload(true)},500)},_setNotificationTimer:function(){var b=this;var c=a("#cookie-notification"),d=function(){b.hideNotificationPanel()},e=setTimeout(d,12e3);c.bind("mouseenter",function(){clearTimeout(e)}).bind("mouseleave",function(){e=setTimeout(d,12e3)})},_buildSettingsPanel:function(b,c){var d=this;var e=a('<div id="cookie-settings">').hide();var f=a('<div id="cookie-settings-overlay">').hide();var g=a('<span class="close">×</span>').click(function(a){a.preventDefault();d.hideSettingsPanel()});a('<div class="title"><h3>'+c.settingsTitle+"</h3></div>").append(g).appendTo(e);e.append(c.settingsText);a('<div id="current-settings">').append(this.cookieDisplay).appendTo(e);var h=a('<div id="settings-actions">');if(d.consentGiven){var i=a('<a href="#" class="block">Remove these cookies</a>').click(function(a){a.preventDefault();d.revokeConsent(c)}).appendTo(h)}else{var j=a('<a href="#" class="allow">Allow these cookies</a>').click(function(a){a.preventDefault();d.setConsent()}).appendTo(h)}e.append(h);b.append(f,e)},_buildNotificationPanel:function(b,c){var d=this;var e=a('<div id="cookie-notification">').hide();e.append(c.notificationText);if(c.showSettings){var f=a('<a href="#">Cookie Settings</a>').click(function(a){a.preventDefault();d.hideNotificationPanel();d.showSettingsPanel()});var g=a('<a href="#">No Thanks</a>').click(function(a){a.preventDefault();d.hideNotificationPanel()});a('<div id="cookie-actions">').append(f,g).appendTo(e)}if(c.notificationCookiesLink!==""){a('<div id="about-cookies-link">').append(c.notificationCookiesLink).appendTo(e)}b.append(e);e.show()}};a.fn[e]=function(b){var c=arguments;if(b===d||typeof b==="object"){return this.each(function(){if(!a.data(this,"plugin_"+e)){a.data(this,"plugin_"+e,new f(this,b))}})}else if(typeof b==="string"&&b[0]!=="_"&&b!=="init"){return this.each(function(){var d=a.data(this,"plugin_"+e);if(d instanceof f&&typeof d[b]==="function"){d[b].apply(d,Array.prototype.slice.call(c,1))}})}};a.fn[e].defaults={notificationText:"",showSettings:true,compliantMode:true,notificationCookiesLink:"",settingsTitle:"",settingsText:"",cookieDomain:"",consentCookieName:"CookieConsent",notificationCookieName:"CookieNotificationShown",onCookiesAllowed:function(){},onCookiesNotAllowed:function(){}}})(jQuery,window,document)